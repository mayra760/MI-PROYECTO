$(document).ready((function(){$("#calendar").fullCalendar({header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay"},locale:"es",defaultView:"month",navLinks:!0,editable:!0,eventLimit:!0,selectable:!0,selectHelper:!1,select:function(e,t){$("#exampleModal").modal(),$("input[name=fecha_inicio]").val(e.format("DD-MM-YYYY"));var n=t.format("DD-MM-YYYY"),a=moment(n,"DD-MM-YYYY").subtract(1,"days").format("DD-MM-YYYY");$("input[name=fecha_fin]").val(a)},events:function(e,t,n,a){$.ajax({url:"obtenerEventos.php",dataType:"json",success:function(e){var t=[];$(e).each((function(){t.push({id:this.id,title:this.evento,start:this.fecha_inicio,end:this.fecha_fin,color:this.color_evento})})),a(t)}})},eventRender:function(e,t){t.find(".fc-content").prepend("<span id='btnCerrar' class='closeon material-icons'>&#xe5cd;</span>"),t.find(".closeon").on("click",(function(){confirm("Deseas Borrar este Evento?")&&($("#calendar").fullCalendar("removeEvents",e.id),$.ajax({type:"POST",url:"borrarEvento.php",data:{id:e.id},success:function(){$(".alert-danger").show(),setTimeout((function(){$(".alert-danger").slideUp(500)}),3e3)}}))}))},eventDrop:function(e){var t=e.id,n=e.start.format("DD-MM-YYYY"),a=e.end?e.end.format("DD-MM-YYYY"):n;$.ajax({url:"arrastrar_soltar_evento.php",data:"start="+n+"&end="+a+"&idEvento="+t,type:"POST"})},eventClick:function(e){$("input[name=idEvento]").val(e.id),$("input[name=evento]").val(e.title),$("input[name=fecha_inicio]").val(e.start.format("DD-MM-YYYY")),$("input[name=fecha_fin]").val(e.end?e.end.format("DD-MM-YYYY"):""),$("#modalUpdateEvento").modal()}}),setTimeout((function(){$(".alert").slideUp(300)}),3e3)}));